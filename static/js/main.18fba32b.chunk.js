(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{236:function(e,t,n){e.exports=n.p+"static/media/spinner.2cff3e76.gif"},265:function(e,t,n){e.exports=n(488)},487:function(e,t,n){},488:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(36),c=n(21),i=n(41),l=n(20),s=n(232),u=n(31),m=n(58),p={count:0,isIncrementing:!1,isDecrementing:!1},d=n(24),h=n.n(d),g=n(38),f=n(108),b=n.n(f),E=n(75),v=n.n(E),O={clientId:"39b6b89bca674b2",clientSecret:"66c81d8ef15136845413d2c29ec3e551ed898f6d",rootUrl:"https://api.imgur.com",domain:"https://coder054.github.io/images-redux/"},y={login:function(){console.log("loginnnnnnnnnnnnnnn");var e={client_id:O.clientId,response_type:"token"};window.location="".concat(O.rootUrl,"/oauth2/authorize?").concat(b.a.stringify(e))},fetchImages:function(e){return v.a.get("".concat(O.rootUrl,"/3/account/me/images"),{headers:{Authorization:"Bearer ".concat(e)}})},uploadImages:function(e,t){var n=Array.from(e).map(function(e){var n=new FormData;return n.append("image",e),v.a.post("".concat(O.rootUrl,"/3/image"),n,{headers:{Authorization:"Bearer ".concat(t)}})});return Promise.all(n)},deleteImage:function(){var e=Object(g.a)(h.a.mark(function e(t,n){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.delete("".concat(O.rootUrl,"/3/image/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}}));case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),editTitleAndDesc:function(){var e=Object(g.a)(h.a.mark(function e(t,n,a,r){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.post("".concat(O.rootUrl,"/3/image/").concat(t),{title:n,description:a},{headers:{Authorization:"Bearer ".concat(r)}}));case 1:case"end":return e.stop()}},e)}));return function(t,n,a,r){return e.apply(this,arguments)}}()},j=n(59),k=function(e,t){return Object(m.a)({},e,t)},N=Object(j.a)([function(e){return!!e.auth.token}],function(e){return!!e}),w={token:window.localStorage.getItem("imgur_token")},T=function(){return function(e){y.login()}},I=n(107),S=n(233),C=n.n(S),x=n(109),D=function(e,t){return function(n){n({type:"SET_REDUX_STATE",propertyName:e,value:t})}},R=(Object(j.a)([function(e){return!!e.auth.token}],function(e){return!!e}),Object(j.a)([function(e){return e.images},function(e){return e.index}],function(e,t){return e[t]})),A=Object(j.a)([R],function(e){return e&&e.bandwidth?(e.bandwidth/1024/1024).toFixed(2).toString()+" MB":""}),U=Object(j.a)([R],function(e){if(!e||!e.datetime)return"";var t,n=e.datetime;return t=n,C()(1e3*t).fromNow()}),_={isUploading:!1,numberOfColumns:4,images:[],isLoadingComplete:!1,bandwidth:0,datetime:0,openStateForModalViewImage:!1,deletehash:"",openStateForModalEditTitleAndDesc:!1,title:"",description:"",index:0},L=function(e,t){return function(){var n=Object(g.a)(h.a.mark(function n(a,r){var o,c;return h.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"images/SET_UPLOADING",isUploading:!0}),o=r().auth.token,console.log("images",e),c=Array.from(e).filter(function(e){return e.type.includes("image/")}),n.next=6,y.uploadImages(c,o);case 6:a({type:"images/SET_UPLOADING",isUploading:!1}),t.push("/");case 8:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()},M=function(){return function(){var e=Object(g.a)(h.a.mark(function e(t,n){var a,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SET_REDUX_STATE",propertyName:"isLoadingComplete",value:!1}),a=n().auth.token,e.next=4,y.fetchImages(a);case 4:r=e.sent,t({type:"SET_REDUX_STATE",propertyName:"images",value:r.data.data}),t({type:"SET_REDUX_STATE",propertyName:"isLoadingComplete",value:!0});case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(g.a)(h.a.mark(function t(n,a){var r,o;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a().auth.token,!window.confirm("Are you sure you want to delete this image?")){t.next=9;break}return t.next=4,y.deleteImage(e,r);case 4:o=a().images.images.filter(function(t){return t.deletehash!==e}),n({type:"SET_REDUX_STATE",propertyName:"images",value:o}),c="Delete image Sucefully!",Object(x.b)(c,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1}),t.next=9;break;case 9:case"end":return t.stop()}var c},t)}));return function(e,n){return t.apply(this,arguments)}}()},B=function(e){return function(){var t=Object(g.a)(h.a.mark(function t(n,a){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_REDUX_STATE",propertyName:"index",value:e}),n({type:"SET_REDUX_STATE",propertyName:"openStateForModalViewImage",value:!0});case 2:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},P=function(e,t,n){return function(){var a=Object(g.a)(h.a.mark(function a(r,o){var c;return h.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=o().auth.token,console.log("title",t),console.log("description",n),a.next=5,y.editTitleAndDesc(e,t,n,c);case 5:r(M()),setTimeout(function(){r({type:"SET_REDUX_STATE",propertyName:"openStateForModalEditTitleAndDesc",value:!1})},200);case 7:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()},X=Object(l.c)({counter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;switch((arguments.length>1?arguments[1]:void 0).type){case"counter/INCREMENT_REQUESTED":return Object(m.a)({},e,{isIncrementing:!0});case"counter/INCREMENT":return Object(m.a)({},e,{count:e.count+1,isIncrementing:!e.isIncrementing});case"counter/DECREMENT_REQUESTED":return Object(m.a)({},e,{isDecrementing:!0});case"counter/DECREMENT":return Object(m.a)({},e,{count:e.count-1,isDecrementing:!e.isDecrementing});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_TOKEN":return k(e,{token:t.token});default:return e}},images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"images/SET_UPLOADING":return k(e,{isUploading:t.isUploading});case"SET_REDUX_STATE":return k(e,Object(I.a)({},t.propertyName,t.value));default:return e}}}),V=Object(u.b)(),z=[s.a,Object(i.routerMiddleware)(V)],q=l.d.apply(void 0,[l.a.apply(void 0,z)].concat([])),G=Object(l.e)(Object(i.connectRouter)(V)(X),{},q),H=n(44),K=n(14),J=n(15),Q=n(17),Y=n(16),W=n(18),Z=n(236),$=n.n(Z),ee=n(5),te=n.n(ee),ne=function(e){function t(){return Object(K.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:te()("upload-wr",{uploading:this.props.isUploading})},r.a.createElement("input",{disabled:this.props.isUploading,type:"file",onChange:function(t){return e.props.uploadImages(t.target.files,e.props.history)},multiple:!0,accept:"image/*"}),!this.props.isUploading&&r.a.createElement("span",null,"Drag images here!"),this.props.isUploading?r.a.createElement("div",{className:"spinner-wr"},r.a.createElement("img",{src:$.a,alt:""})):null)}}]),t}(r.a.Component),ae=Object(c.connect)(function(e){return{isUploading:e.images.isUploading}},function(e){return Object(l.b)({uploadImages:L},e)})(ne),re=function(e){var t=function(t){function n(){return Object(K.a)(this,n),Object(Q.a)(this,Object(Y.a)(n).apply(this,arguments))}return Object(W.a)(n,t),Object(J.a)(n,[{key:"componentDidMount",value:function(){this.shouldNavigateAway()}},{key:"componentDidUpdate",value:function(){this.shouldNavigateAway()}},{key:"shouldNavigateAway",value:function(){this.props.auth||this.props.changePage()}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),n}(a.Component);return Object(c.connect)(function(e){return{auth:e.auth.token}},function(e){return Object(l.b)({changePage:function(){return Object(i.push)("/")}},e)})(t)},oe=n(34),ce=function(e){return r.a.createElement("h3",null," ",r.a.createElement("a",{href:"https://apidocs.imgur.com/"},"Imgur API")," ")},ie=function(e){return r.a.createElement("h3",null," React.js, Redux, React router ")},le=function(e){function t(e){return Object(K.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).call(this,e))}return Object(W.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){var e=this.props.match;return console.log("match",e),r.a.createElement("div",null,r.a.createElement("h2",null," About "),r.a.createElement(H.Route,{exact:!0,path:e.path,render:function(){return r.a.createElement("p",null," Click for more detail: ")}}),r.a.createElement(oe.a,{to:"".concat(e.url,"/backend")}," Backend "),r.a.createElement(oe.a,{to:"".concat(e.url,"/frontend")}," Frontend "),r.a.createElement(H.Route,{path:"".concat(e.path,"/backend"),component:ce}),r.a.createElement(H.Route,{path:"".concat(e.path,"/frontend"),component:ie}))}}]),t}(r.a.Component),se=re(le),ue=function(e){function t(e){return Object(K.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).call(this,e))}return Object(W.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null," Logout ")}}]),t}(r.a.Component),me=function(e){function t(e){var n;return Object(K.a)(this,t),(n=Object(Q.a)(this,Object(Y.a)(t).call(this,e))).logout=function(){n.props.logout()},n.logIn=function(){n.props.login()},console.log(n.props),n}return Object(W.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Header-wr"},r.a.createElement("div",{className:"left"},r.a.createElement(oe.a,{to:"/",className:"brand"}," ","Image Storage"," "),r.a.createElement(oe.a,{to:"/"}," Galleries "),r.a.createElement(oe.a,{to:"/upload"}," Upload "),r.a.createElement(oe.a,{to:"/about"}," About "),r.a.createElement(oe.a,{to:"/public"}," Public ")),r.a.createElement("div",{className:"right"},this.props.isLoggedIn?r.a.createElement("button",{className:"logout-btn",onClick:this.logout}," ","Logout"," "):null,this.props.isLoggedIn?null:r.a.createElement("button",{className:"login-btn",onClick:this.logIn}," ","Login"," ")))}}]),t}(r.a.Component),pe={login:T,logout:function(){return function(e){e({type:"auth/SET_TOKEN",token:null}),window.localStorage.removeItem("imgur_token"),Object(i.push)("/")}}},de=Object(c.connect)(function(e){return{auth:e.auth,isLoggedIn:N(e)}},pe)(me),he=n(110),ge=n.n(he),fe=n(237),be=n.n(fe),Ee=function(e){function t(){return Object(K.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(J.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.fetchImages();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log("this.props.isLoadingComplete ",this.props.isLoadingComplete),this.props.isLoadingComplete?this.props.images.images.length?r.a.createElement("div",{style:{columnCount:"".concat(this.props.images.numberOfColumns)},className:"Images-wrapper"},this.props.images.images.map(function(t,n){return r.a.createElement("div",{className:"one-img-wr",key:t.id},r.a.createElement(ge.a,{id:"image-".concat(t.id)},r.a.createElement(be.a,{onClick:e.props.clickImage.bind(null,n),src:t.link,alt:t.title,loader:r.a.createElement("div",null," Loading... ")})),r.a.createElement("button",{onClick:function(n){e.props.deleteImage(t.deletehash)},className:"button-medium button-danger title btn-delete","original-title":"permanently delete images"}," ",r.a.createElement("i",{className:"fas fa-trash-alt"})))})):r.a.createElement("div",{className:"letupload"}," ","Let's ",r.a.createElement(oe.a,{to:"/upload"}," Upload ")," some images!"," "):"Loading..."}}]),t}(a.Component),ve=Object(c.connect)(function(e){var t=e.images;return{images:t,isLoadingComplete:t.isLoadingComplete}},function(e){return Object(l.b)({setReduxState:D,fetchImages:M,deleteImage:F,clickImage:B},e)})(Ee),Oe=n(493),ye=function(e){function t(){var e,n;Object(K.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){n.props.setReduxState("openStateForModalViewImage",!1)},n}return Object(W.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){var e=this,t=this.props.activeImage||"",n=t.name,a=t.views,o=t.title,c=t.description,i=this.props,l=i.bandwidth,s=i.datetime,u=null;this.props.index>0&&(u=r.a.createElement("i",{onClick:function(t){return e.props.setReduxState("index",e.props.index-1)},className:"fas fa-chevron-left"}));var m=null;return this.props.index<this.props.length-1&&(m=r.a.createElement("i",{onClick:function(t){return e.props.setReduxState("index",e.props.index+1)},className:"fas fa-chevron-right"})),r.a.createElement("div",null,r.a.createElement(Oe.a,{open:this.props.openStateForModalViewImage,onClose:this.handleClose,closeIcon:!0},r.a.createElement("div",{className:"modal-header"},r.a.createElement("div",{className:"one-info"},r.a.createElement("span",{className:"label"},"Name"),r.a.createElement("span",{className:"info"}," ",n," ")),r.a.createElement("div",{className:"one-info"},r.a.createElement("span",{className:"label"},"Views"),r.a.createElement("span",{className:"info"}," ",a," ")),r.a.createElement("div",{className:"one-info"},r.a.createElement("span",{className:"label"},"Submitted"),r.a.createElement("span",{className:"info"}," ",s," ")),r.a.createElement("div",{className:"one-info"},r.a.createElement("span",{className:"label"},"Bandwith"),r.a.createElement("span",{className:"info"}," ",l," "))),r.a.createElement(Oe.a.Content,null,r.a.createElement("div",{className:"modal-content"},u,r.a.createElement(ge.a,{id:"image-".concat(this.props.activeImage?this.props.activeImage.id:"")},r.a.createElement("img",{src:this.props.activeImage?this.props.activeImage.link:"",alt:this.props.activeImage?this.props.activeImage.title:""})),m)),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("div",{className:"title-and-desc-wr"},r.a.createElement("div",{className:"left"},r.a.createElement("p",{className:"title-img"}," ",o," "),r.a.createElement("p",{className:"desc-img"}," ",c," "))),r.a.createElement("span",{onClick:function(t){return e.props.setReduxState("openStateForModalEditTitleAndDesc",!0)},className:"edittitledesc"}," ","edit title/description"," "))))}}]),t}(a.Component),je=Object(c.connect)(function(e){var t=e.images;return{openStateForModalViewImage:t.openStateForModalViewImage,activeImage:R(t),bandwidth:A(t),datetime:U(t),index:t.index,length:t.images.length}},function(e){return Object(l.b)({setReduxState:D},e)})(ye),ke=n(255),Ne=n(119),we=function(e){function t(){var e,n;Object(K.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){n.props.setReduxState("openStateForModalEditTitleAndDesc",!1)},n}return Object(W.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){var e=this,t=this.props.activeImage||"",n=(t.name,t.views,t.title,t.description,this.props);n.bandwidth,n.datetime;return console.log("test",this.props.activeImage?this.props.activeImage.id:""),r.a.createElement("div",null,r.a.createElement(Oe.a,{className:"modal-edit-wr",open:this.props.openStateForModalEditTitleAndDesc,onClose:this.handleClose,closeIcon:!0},r.a.createElement("div",{className:"modal-header-formik"},"Edit Title and Description"),r.a.createElement(Oe.a.Content,null,r.a.createElement(ke.a,{initialValues:{myTitle:this.props.activeImage&&this.props.activeImage.title?this.props.activeImage.title:"",myDesc:this.props.activeImage&&this.props.activeImage.description?this.props.activeImage.description:""},onSubmit:function(t,n){n.setSubmitting;e.props.editTitleAndDesc(e.props.activeImage.deletehash,t.myTitle,t.myDesc)},validationSchema:Ne.object().shape({myTitle:Ne.string().min(3,"Title must be at leat 3 characters!").max(40,"Title must be smaller than 40 characters!").required("Required"),myDesc:Ne.string().min(3,"Description must be at leat 3 characters!").max(100,"Description must be smaller than 100 characters!").required("Required")})},function(e){var t=e.values,n=e.touched,a=e.errors,o=e.dirty,c=e.isSubmitting,i=e.handleChange,l=e.handleBlur,s=e.handleSubmit,u=e.handleReset;return r.a.createElement("form",{className:"formik-wr",onSubmit:s},r.a.createElement("label",{htmlFor:"myTitle",style:{display:"block"}},"Title"),r.a.createElement("input",{id:"myTitle",placeholder:"Title",type:"text",value:t.myTitle,onChange:i,onBlur:l,className:a.myTitle&&n.myTitle?"text-input error":"text-input"}),a.myTitle&&n.myTitle&&r.a.createElement("div",{className:"input-feedback"},a.myTitle),r.a.createElement("label",{htmlFor:"myDesc",style:{display:"block"}},"Title"),r.a.createElement("textarea",{id:"myDesc",placeholder:"Description",type:"text",value:t.myDesc,onChange:i,onBlur:l,className:a.myDesc&&n.myDesc?"text-input error":"text-input"}),a.myDesc&&n.myDesc&&r.a.createElement("div",{className:"input-feedback"},a.myDesc),r.a.createElement("button",{type:"button",className:"outline",onClick:u,disabled:!o||c},"Reset"),r.a.createElement("button",{type:"submit",disabled:c},"Submit"))}))))}}]),t}(a.Component),Te=Object(c.connect)(function(e){var t=e.images;return{openStateForModalEditTitleAndDesc:t.openStateForModalEditTitleAndDesc,activeImage:R(t)}},function(e){return Object(l.b)({setReduxState:D,editTitleAndDesc:P},e)})(we),Ie=function(e){function t(){return Object(K.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){var e=this;return console.log("this.props.length ",this.props.length),this.props.length>=10?r.a.createElement("select",{value:this.props.numberOfColumns,onChange:function(t){return e.props.setReduxState("numberOfColumns",t.target.value)},name:"",id:""},r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"6"},"6")):null}}]),t}(a.Component),Se=Object(c.connect)(function(e){var t=e.images;return{numberOfColumns:t.numberOfColumns,length:t.images.length}},function(e){return Object(l.b)({setReduxState:D},e)})(Ie),Ce=function(e){function t(){return Object(K.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){var e=this;return this.props.token?r.a.createElement("div",{className:"ImageList-wr"},r.a.createElement(Se,null),r.a.createElement(je,null),r.a.createElement(Te,null),r.a.createElement(ve,null)):r.a.createElement("div",{className:"needloginfirst"},"You need to",r.a.createElement("span",{onClick:function(t){return e.props.login()},className:"login"},"Login"),"first!")}}]),t}(a.Component),xe=Object(c.connect)(function(e){return{token:e.auth.token}},function(e){return Object(l.b)({login:T},e)})(Ce),De=function(e){function t(){var e,n;Object(K.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(Q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){console.log(n.props),n.props.finalizeLogin(window.location.hash,n.props.history)},n}return Object(W.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"AuthHandler")}}]),t}(a.Component),Re={finalizeLogin:function(e,t){return function(n){var a=b.a.parse(e.replace("#",""));console.log(a),n({type:"auth/SET_TOKEN",token:a.access_token}),window.localStorage.setItem("imgur_token",a.access_token),t.push("/")}}},Ae=Object(c.connect)(function(e){return{}},Re)(De),Ue=function(e){function t(){return Object(K.a)(this,t),Object(Q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"PublicInfo-wrapper"}," ","This is a public page (not require login to see)"," ")}}]),t}(a.Component),_e=(n(485),function(){return r.a.createElement("div",null,r.a.createElement(de,null),r.a.createElement(x.a,null),r.a.createElement("main",{className:"container"},r.a.createElement(H.Route,{path:"/about",component:se}),r.a.createElement(H.Route,{exact:!0,path:"/upload",component:re(ae)}),r.a.createElement(H.Route,{exact:!0,path:"/logout",component:ue}),r.a.createElement(H.Route,{exact:!0,path:"/oauth2/callback",component:Ae}),r.a.createElement(H.Route,{exact:!0,path:"/public",component:Ue}),r.a.createElement(H.Route,{exact:!0,path:"/",component:xe})))}),Le=(n(486),n(487),document.querySelector("#root"));Object(o.render)(r.a.createElement(c.Provider,{store:G},r.a.createElement(i.ConnectedRouter,{history:V},r.a.createElement("div",null,r.a.createElement(_e,null)))),Le)}},[[265,1,2]]]);
//# sourceMappingURL=main.18fba32b.chunk.js.map